# BTS 전략 가이드

BTS 자동매매 시스템의 4단계 전략 프레임워크 상세 가이드

## 목차

1. [전략 개요](#전략-개요)
2. [종목선정 전략](#종목선정-전략)
3. [매수 전략](#매수-전략)
4. [포트폴리오 전략](#포트폴리오-전략)
5. [매도 전략](#매도-전략)
6. [전략 조합 패턴](#전략-조합-패턴)
7. [파라미터 튜닝](#파라미터-튜닝)
8. [백테스팅 활용](#백테스팅-활용)

---

## 전략 개요

BTS는 **4단계 전략 파이프라인**을 사용합니다:

```
종목선정 → 매수 → 포트폴리오 → 매도
(Screening) (Entry) (Portfolio) (Exit)
```

각 단계는 독립적으로 설정 가능하며, 다양한 조합으로 자신만의 트레이딩 시스템을 구축할 수 있습니다.

---

## 종목선정 전략

### 1. 모멘텀 기반 (Momentum Screening)

**원리**: 가격과 거래량의 상승 모멘텀이 강한 종목 선별

**핵심 지표**:
- 가격 변동률 (1일/7일/30일)
- 거래량 증가율
- RSI 모멘텀

**파라미터**:
```python
{
    "price_weight": 0.4,      # 가격 가중치
    "volume_weight": 0.3,     # 거래량 가중치
    "rsi_weight": 0.3,        # RSI 가중치
    "lookback_days": 7        # 계산 기간
}
```

**적합한 시장**:
- ✅ 상승장: 강한 모멘텀 포착
- ⚠️ 횡보장: 노이즈 많음
- ❌ 하락장: 하락 모멘텀 선별 가능

**튜닝 팁**:
- 단기 트레이딩: `lookback_days = 3-7`
- 중장기 투자: `lookback_days = 14-30`
- 가격 중시: `price_weight` 증가

### 2. 거래량 기반 (Volume Screening)

**원리**: 거래량 급증은 강한 관심을 의미

**핵심 지표**:
- 24시간 거래대금
- 평균 대비 거래량 증가율
- 거래량/시가총액 비율

**적합한 시장**:
- ✅ 뉴스/이벤트 발생 시
- ✅ 신규 상장 모니터링
- ⚠️ 저유동성 시장

**튜닝 팁**:
- 급등주 포착: 거래량 증가율 > 200%
- 안정성 중시: 거래대금 순위 사용

### 3. 기술지표 복합 (Technical Screening)

**원리**: 여러 기술지표의 긍정 신호 조합

**핵심 지표**:
- RSI (과매수/과매도)
- MACD (골든/데드 크로스)
- 이동평균 정배열

**적합한 시장**:
- ✅ 횡보장: 기술적 패턴 명확
- ✅ 중장기 투자
- ⚠️ 급변 시장

**튜닝 팁**:
- 보수적: 모든 지표 AND 조건
- 공격적: 2개 이상 OR 조건

### 4. 하이브리드 (Hybrid Screening)

**원리**: 여러 스크리닝 전략의 가중 조합

**파라미터 예시**:
```python
{
    "strategies": ["momentum", "volume", "technical"],
    "weights": [0.4, 0.3, 0.3]
}
```

**적합한 사용자**:
- ✅ 다양한 관점 원하는 투자자
- ✅ 리스크 분산 중시
- ⚠️ 파라미터 관리 복잡

---

## 매수 전략

### 1. RSI 전략

**원리**: 과매도 구간에서 반등 포착

**시그널**:
- RSI < 30: 매수 (과매도)
- RSI > 70: 관망 (과매수)

**파라미터**:
```python
{
    "period": 14,           # RSI 계산 기간
    "oversold": 30,         # 과매도 기준
    "overbought": 70        # 과매수 기준
}
```

**장점**:
- ✅ 단순하고 직관적
- ✅ 역추세 전략으로 저점 매수

**단점**:
- ❌ 강한 추세에서 계속 과매도 유지 가능
- ❌ 횡보장에서 잦은 신호

**튜닝 팁**:
- 보수적: oversold = 20-25
- 공격적: oversold = 35-40
- 단기: period = 7-9
- 장기: period = 14-21

### 2. 이동평균 교차 (MA Cross)

**원리**: 단기 MA가 장기 MA를 상향 돌파 시 매수

**시그널**:
- 골든 크로스: 단기 MA > 장기 MA (매수)
- 데드 크로스: 단기 MA < 장기 MA (매도 대기)

**파라미터**:
```python
{
    "short_period": 20,     # 단기 MA
    "long_period": 60,      # 장기 MA
    "ma_type": "EMA"        # SMA 또는 EMA
}
```

**장점**:
- ✅ 추세 추종에 효과적
- ✅ 강한 모멘텀 포착

**단점**:
- ❌ 횡보장에서 거짓 신호
- ❌ 후행 지표 (늦은 진입)

**튜닝 팁**:
- 단기: (5, 20)
- 중기: (20, 60)
- 장기: (50, 200)
- EMA: 최근 가격 반영 빠름
- SMA: 안정적, 노이즈 적음

### 3. 볼린저 밴드

**원리**: 가격이 하단 밴드 터치 시 저평가 판단

**시그널**:
- 가격 < 하단 밴드: 매수
- 가격 > 상단 밴드: 매도 고려

**파라미터**:
```python
{
    "period": 20,           # 이동평균 기간
    "std_dev": 2.0,         # 표준편차 배수
    "signal_mode": "touch"  # touch 또는 breakout
}
```

**장점**:
- ✅ 변동성 고려
- ✅ 횡보장에서 효과적

**단점**:
- ❌ 강한 추세에서 밴드 따라감
- ❌ 급변 시 대응 느림

**튜닝 팁**:
- 좁은 밴드 (민감): std_dev = 1.5
- 넓은 밴드 (안정): std_dev = 2.5
- touch: 터치 즉시
- breakout: 돌파 후 재진입

### 4. MACD

**원리**: MACD 선이 시그널 선을 상향 돌파 시 매수

**시그널**:
- MACD > Signal: 매수 (골든 크로스)
- Histogram > 0: 상승 모멘텀

**파라미터**:
```python
{
    "fast": 12,             # 단기 EMA
    "slow": 26,             # 장기 EMA
    "signal": 9             # Signal 선
}
```

**장점**:
- ✅ 모멘텀과 추세 동시 파악
- ✅ 다양한 시장 조건에 적용

**단점**:
- ❌ 후행 지표
- ❌ 거짓 신호 가능

**튜닝 팁**:
- 단기 민감: (6, 13, 5)
- 표준: (12, 26, 9)
- 장기 안정: (19, 39, 9)

### 5. 멀티 지표 (Multi-Indicator)

**원리**: 여러 지표의 동의 확보

**조합 모드**:
- **AND**: 모든 지표 매수 신호 → 높은 확신도
- **OR**: N개 이상 매수 신호 → 기회 확대

**파라미터 예시**:
```python
{
    "indicators": ["RSI", "MACD", "BB"],
    "combination_mode": "AND",
    "min_indicators": 2      # OR 모드에서 최소 개수
}
```

**튜닝 팁**:
- AND: 보수적, 거짓 신호 감소
- OR (min=2): 균형
- OR (min=1): 공격적

---

## 포트폴리오 전략

### 1. 균등 배분 (Equal Weight)

**원리**: 모든 종목에 동일 금액

**수식**:
```
각 종목 금액 = 총 자본 / 종목 수
```

**장점**:
- ✅ 가장 단순
- ✅ 모든 종목 동등한 기회

**단점**:
- ❌ 우량주 비중 낮음
- ❌ 리스크 고려 없음

**적합한 경우**:
- 소규모 포트폴리오 (3-5개)
- 모든 종목 신뢰

### 2. 비율 배분 (Proportional Weight)

**원리**: 순위 또는 커스텀 가중치

**모드**:
- **Rank**: 1위부터 차등 (예: 30%, 25%, 20%, 15%, 10%)
- **Custom**: 사용자 직접 지정

**적합한 경우**:
- 종목별 차별화
- 전략적 비중 조절

**튜닝 팁**:
- 상위 집중: 1위 30-40%
- 분산 중시: 가중치 평준화

### 3. 켈리 기준 (Kelly Criterion)

**원리**: 수학적 최적 포지션 크기

**수식**:
```
Kelly% = (승률 × 평균수익 - (1-승률) × 평균손실) / 평균수익
실제 배분 = Kelly% × kelly_fraction
```

**파라미터**:
```python
{
    "kelly_fraction": 0.5,   # Half Kelly (안정성)
    "default_allocation": 0.1
}
```

**장점**:
- ✅ 장기적 자본 성장 최대화
- ✅ 승률 반영

**단점**:
- ❌ 과거 데이터 의존
- ❌ 변동성 큼 (Full Kelly)

**튜닝 팁**:
- Full Kelly (1.0): 공격적, 위험
- Half Kelly (0.5): 권장
- Quarter Kelly (0.25): 보수적

### 4. 리스크 패리티 (Risk Parity)

**원리**: 각 자산의 리스크 기여도 동일

**수식**:
```
가중치 = (1 / 변동성) / Σ(1 / 변동성)
```

**파라미터**:
```python
{
    "lookback_days": 30     # 변동성 계산 기간
}
```

**장점**:
- ✅ 리스크 균등 배분
- ✅ 안정적 포트폴리오

**단점**:
- ❌ 저변동성 자산 비중 높음
- ❌ 변동성 급변 시 대응 느림

**튜닝 팁**:
- 단기 반응: lookback = 14
- 안정성: lookback = 60

### 5. 동적 배분 (Dynamic Allocation)

**원리**: 시장 리스크에 따라 현금 비중 조절

**로직**:
- 높은 변동성 → 현금 예비비 증가
- 낮은 변동성 → 적극 투자

**파라미터**:
```python
{
    "reserve_ratio": 0.2,    # 기본 예비비
    "risk_threshold": 0.02   # 리스크 임계값
}
```

**장점**:
- ✅ 시장 상황 반영
- ✅ 유연한 대응

**단점**:
- ❌ 복잡한 설정
- ❌ 과최적화 위험

**튜닝 팁**:
- 보수적: reserve_ratio = 0.3-0.4
- 공격적: reserve_ratio = 0.1-0.15

---

## 매도 전략

### 1. 고정 목표가 (Fixed Target)

**원리**: 미리 정한 목표 수익/손실에 도달 시 매도

**파라미터**:
```python
{
    "target_profit_pct": 10.0,   # 목표 수익 10%
    "stop_loss_pct": -5.0        # 손절 -5%
}
```

**장점**:
- ✅ 명확한 규칙
- ✅ 감정 배제

**단점**:
- ❌ 시장 상황 무시
- ❌ 추가 상승 기회 상실

**튜닝 팁**:
- 단기: (5%, -3%)
- 중기: (15%, -7%)
- 장기: (30%, -10%)

### 2. 단계별 익절 (Ladder Exit)

**원리**: 가격 상승에 따라 분할 매도

**파라미터 예시**:
```python
{
    "profit_levels": [
        {"profit_pct": 5.0, "sell_ratio": 0.33},   # 5% 시 1/3 매도
        {"profit_pct": 10.0, "sell_ratio": 0.33},  # 10% 시 1/3 매도
        {"profit_pct": 20.0, "sell_ratio": 0.34}   # 20% 시 나머지
    ]
}
```

**장점**:
- ✅ 리스크 점진적 감소
- ✅ 추가 상승 여력

**단점**:
- ❌ 관리 복잡
- ❌ 수수료 증가

**튜닝 팁**:
- 3단계: (5%, 10%, 20%)
- 5단계: (3%, 7%, 12%, 18%, 25%)

### 3. 트레일링 스탑 (Trailing Stop)

**원리**: 최고가 대비 일정 % 하락 시 매도

**파라미터**:
```python
{
    "trailing_pct": -3.0     # 최고가 대비 -3%
}
```

**장점**:
- ✅ 상승 추세 보호
- ✅ 이익 극대화

**단점**:
- ❌ 변동성에 민감
- ❌ 단기 조정에 매도 가능

**튜닝 팁**:
- 공격적: -2%
- 균형: -3%
- 보수적: -5%

### 4. ATR 기반 손절 (ATR Stop)

**원리**: 변동성에 비례한 손절가

**수식**:
```
손절가 = 진입가 - (ATR × multiplier)
```

**파라미터**:
```python
{
    "atr_period": 14,
    "atr_multiplier": 2.0
}
```

**장점**:
- ✅ 변동성 반영
- ✅ 거짓 손절 감소

**단점**:
- ❌ 급변 시 손실 큼
- ❌ 계산 복잡

**튜닝 팁**:
- 타이트: multiplier = 1.5
- 표준: multiplier = 2.0
- 여유: multiplier = 3.0

### 5. 멀티 조건 (Multi-Condition)

**원리**: 여러 매도 조건 OR 조합

**조건 예시**:
- 목표 수익 도달
- 손절가 도달
- RSI 과매수
- 보유 시간 경과

**장점**:
- ✅ 다각도 보호
- ✅ 기회 포착

**단점**:
- ❌ 복잡한 관리
- ❌ 잦은 매도 가능

**튜닝 팁**:
- 보수적: 2개 이상 조건
- 균형: OR 조합
- 공격적: 1개 조건

---

## 전략 조합 패턴

### 패턴 1: 보수적 장기 투자

```yaml
screening: momentum (top 5, lookback=30)
entry: ma_cross (20, 60, EMA)
portfolio: equal_weight
exit: fixed_target (profit=20%, loss=-5%)
```

**특징**:
- 안정적 모멘텀 종목
- 확실한 추세 진입
- 균등 분산
- 넉넉한 목표/손절

**예상 승률**: 40-50%
**예상 손익비**: 3:1

### 패턴 2: 공격적 스윙 트레이딩

```yaml
screening: hybrid (momentum 0.5 + volume 0.5, top 10)
entry: multi_indicator (RSI + BB, AND)
portfolio: kelly_criterion (fraction=0.5)
exit: trailing_stop (-3%)
```

**특징**:
- 모멘텀 + 거래량 복합
- 복수 지표 확인
- 켈리 기준 최적 배분
- 추세 추종 매도

**예상 승률**: 50-60%
**예상 손익비**: 2:1

### 패턴 3: AI 보조 단타

```yaml
screening: volume (top 3)
entry: hybrid_entry + AI evaluation
portfolio: risk_parity
exit: multi_condition (profit=5% OR loss=-2% OR time=4h)
```

**특징**:
- 거래량 급증 종목
- AI 검증 필수
- 리스크 패리티
- 빠른 청산

**예상 승률**: 55-65%
**예상 손익비**: 1.5:1

---

## 파라미터 튜닝

### 일반 원칙

1. **한 번에 하나씩**: 여러 파라미터 동시 변경 금지
2. **백테스팅 필수**: 변경 후 반드시 검증
3. **과최적화 경계**: 과거 데이터에 과도 맞춤 위험
4. **샘플 외 검증**: 훈련 기간과 검증 기간 분리

### RSI 튜닝 가이드

| 시장 | Period | Oversold | Overbought |
|------|--------|----------|------------|
| 상승장 | 14 | 40 | 70 |
| 횡보장 | 14 | 30 | 70 |
| 하락장 | 21 | 20 | 60 |
| 변동성 높음 | 9 | 25 | 75 |

### MA Cross 튜닝 가이드

| 스타일 | Short | Long | Type |
|--------|-------|------|------|
| 초단기 | 5 | 10 | EMA |
| 단기 | 10 | 30 | EMA |
| 중기 | 20 | 60 | EMA |
| 장기 | 50 | 200 | SMA |

### 포트폴리오 크기 권장

| 자본금 | 종목 수 | 전략 |
|--------|---------|------|
| < 1000만 | 3-5 | Equal |
| 1000-5000만 | 5-10 | Proportional |
| 5000만-1억 | 8-15 | Kelly/Risk Parity |
| > 1억 | 10-20 | Dynamic |

---

## 백테스팅 활용

### 필수 체크리스트

1. **충분한 데이터**: 최소 6개월, 권장 1-2년
2. **다양한 시장**: 상승/하락/횡보 포함
3. **실제 비용**: 슬리피지 0.1%, 수수료 0.05%
4. **워크포워드**: 최근 3개월은 검증용

### 성과 지표 해석

**샤프 비율**:
- < 0: 무위험 수익률 이하
- 0-1: 낮은 위험 대비 수익
- 1-2: 양호
- 2-3: 우수
- \> 3: 매우 우수 (과최적화 의심)

**MDD (최대 손실폭)**:
- < 10%: 매우 안정적
- 10-20%: 양호
- 20-30%: 주의
- \> 30%: 위험

**승률 vs 손익비**:
- 승률 높음 (>60%): 손익비 1:1 이상
- 승률 보통 (40-60%): 손익비 2:1 이상
- 승률 낮음 (<40%): 손익비 3:1 이상

### 일반적인 함정

1. **과최적화**: 백테스트 100%, 실전 손실
   - 해결: 워크포워드 검증

2. **룩어헤드 바이어스**: 미래 정보 사용
   - 해결: 엄격한 시간 순서 준수

3. **생존 편향**: 상장폐지 종목 제외
   - 해결: 전체 유니버스 포함

4. **데이터 스누핑**: 여러 전략 시도 후 최상만 선택
   - 해결: 샘플 외 데이터로 최종 검증

---

## 실전 적용 시 주의사항

### 모의투자 단계

1. **최소 1개월**: 실제 시장 조건 경험
2. **소액 시작**: 실거래 10-20% 금액
3. **로그 분석**: 모든 거래 기록
4. **감정 관리**: 두려움/탐욕 체크

### 실거래 전환

1. **목표 달성**: 모의투자 수익률 목표 달성
2. **안정성 확인**: MDD < 20%, 승률 > 50%
3. **점진적 증액**: 초기 소액 → 단계적 증가
4. **지속 모니터링**: 주간/월간 성과 리뷰

### 리스크 관리 원칙

1. **1% 룰**: 한 종목 손실 < 총 자본 1%
2. **5% 룰**: 일일 총 손실 < 총 자본 5%
3. **분산 투자**: 한 종목 < 총 자본 20%
4. **여유 현금**: 항상 20-30% 현금 보유

---

## 추천 학습 경로

### 초보자

1. RSI 전략 + 고정 목표가
2. 균등 배분 포트폴리오
3. 백테스팅으로 검증
4. 모의투자 1개월

### 중급자

1. MA Cross + 트레일링 스탑
2. 비율 배분 또는 켈리
3. 멀티 지표 실험
4. AI 평가 추가

### 고급자

1. 하이브리드 전략 개발
2. 동적 배분 + 리밸런싱
3. 커스텀 전략 작성
4. 실시간 모니터링 자동화

---

## 참고 자료

- [Technical Analysis Explained](https://www.investopedia.com/terms/t/technicalanalysis.asp)
- [Quantitative Trading Strategies](https://www.quantstart.com/)
- [Algorithmic Trading](https://www.quantconnect.com/docs)

---

**면책 조항**: 이 가이드는 교육 목적으로만 제공됩니다. 실제 투자 결정은 본인의 책임이며, 과거 성과가 미래 수익을 보장하지 않습니다.
