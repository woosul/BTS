# 필터링 시스템 사용 가이드

## 빠른 시작 가이드

### 1. 필터 프로파일 만들기 (2분)

1. 왼쪽 사이드바에서 **"Filtering"** 페이지 클릭
2. 시장 선택: **KRW** (한국 원화)
3. 원하는 필터 조건 설정:
   ```
   ✅ 거래대금 필터: 100억원 이상
   ✅ 시가총액 필터: 최대 1조원
   ✅ 상장기간: 180일 이상
   ✅ 가격범위: 500원 ~ 1000만원
   ✅ 변동성: 3% ~ 15%
   ✅ 스프레드: 0.3% 이하
   ```
4. 프로파일 이름: **"기본 필터"**
5. **"프로파일 저장"** 버튼 클릭

### 2. 필터 테스트하기 (30초)

1. 같은 페이지에서 **"필터 테스트 실행"** 버튼 클릭
2. 결과 확인:
   - 전체 종목: 214개
   - 필터링 후: 약 25개
   - 필터링률: 88%

### 3. Screening에 적용하기 (1분)

1. 왼쪽 사이드바에서 **"Screening"** 페이지 클릭
2. 사이드바에서 **"사전 필터링 사용"** 체크
3. 프로파일 선택: **"기본 필터"**
4. 조건 미리보기에서 필터 확인
5. 스크리닝 설정 후 **"스크리닝 실행"**

---

## 필터 설정 가이드

### 추천 프로파일

#### 🛡️ 보수적 (안전 중시)
```yaml
거래대금: 100억원 이상
시가총액: 5000억 미만 제외
상장기간: 180일 (6개월) 이상
가격범위: 1,000원 ~ 500만원
변동성: 3~10%
스프레드: 0.3% 이하

예상 결과: 214개 → 20개 (91% 감소)
처리 시간: 60초 → 7초 (88% 단축)
```

#### ⚖️ 균형적 (중도)
```yaml
거래대금: 50억원 이상
시가총액: 제한 없음
상장기간: 90일 (3개월) 이상
가격범위: 500원 ~ 1000만원
변동성: 3~15%
스프레드: 0.5% 이하

예상 결과: 214개 → 40개 (81% 감소)
처리 시간: 60초 → 15초 (75% 단축)
```

#### 🚀 공격적 (수익 중시)
```yaml
거래대금: 10억원 이상
시가총액: 제한 없음
상장기간: 30일 (1개월) 이상
가격범위: 제한 없음
변동성: 5~30%
스프레드: 1.0% 이하

예상 결과: 214개 → 80개 (63% 감소)
처리 시간: 60초 → 30초 (50% 단축)
```

---

## 각 필터 설명

### 0️⃣ 상장폐지 & 거래정지
- **항상 활성화 권장**
- 거래 불가능한 종목 자동 제외

### 1️⃣ 거래대금 (24시간)
- **가장 중요한 필터**
- 낮으면: 슬리피지 발생, 체결 어려움
- 높으면: 유동성 좋음, 안정적 거래
- **권장**: 50~100억원 이상

### 2️⃣ 시가총액
- **안정성 지표**
- 너무 낮으면: 위험한 알트코인
- 너무 높으면: 대형주 (안정적이지만 수익률 낮음)
- **권장**: 최대 1조원 (중소형주 선호)

### 3️⃣ 상장기간
- **신뢰성 지표**
- 신규 상장: 가격 불안정, 데이터 부족
- 오래된 종목: 시장 검증됨
- **권장**: 90~180일 이상

### 4️⃣ 가격범위
- **휴지주 제외**
- 500원 미만: 휴지코인 가능성
- 1000만원 초과: 고가 종목 (비트코인 등)
- **권장**: 500원 ~ 1000만원

### 5️⃣ 변동성 (7일 평균)
- **리스크 조절**
- 너무 낮음: 수익 기회 적음
- 너무 높음: 위험, 급등락
- **권장**: 3~15%

### 6️⃣ 스프레드 (매수/매도 가격차)
- **거래 비용**
- 높으면: 체결가 불리, 손실 증가
- 낮으면: 유동성 좋음
- **권장**: 0.3~0.5% 이하

---

## 실전 예시

### 시나리오 1: 안전하게 시작하기

**목표**: 위험 최소화, 안정적 수익

**설정**:
```
필터: 보수적 프로파일
전략: RSI_Strategy (과매도/과매수)
종목 수: 상위 5개
```

**예상 결과**:
- 214개 → 20개 필터링
- 20개 중 상위 5개 선정
- 월 예상 수익률: 3~5%
- 리스크: 낮음

### 시나리오 2: 적극적 투자

**목표**: 높은 수익률 추구

**설정**:
```
필터: 공격적 프로파일
전략: Momentum_Strategy (추세 추종)
종목 수: 상위 10개
```

**예상 결과**:
- 214개 → 80개 필터링
- 80개 중 상위 10개 선정
- 월 예상 수익률: 10~20%
- 리스크: 높음

### 시나리오 3: 데이트레이딩

**목표**: 일일 단타 매매

**설정**:
```
필터: 거래대금 200억 이상, 스프레드 0.2% 이하
전략: Volume_Strategy (거래량 급증)
종목 수: 상위 3개
재검색: 매 4시간
```

**예상 결과**:
- 214개 → 15개 필터링
- 15개 중 상위 3개 선정
- 일 평균 거래: 2~3회
- 목표 수익률: 일 1~2%

---

## 성능 최적화 팁

### 1. 빠른 필터 먼저 적용
```
순서:
1. 거래대금 (빠름) → 214개 → 60개
2. 가격범위 (빠름) → 60개 → 50개
3. 시가총액 (보통) → 50개 → 40개
4. 변동성 (느림) → 40개 → 30개
5. 스프레드 (느림) → 30개 → 25개

총 시간: 5초
```

### 2. 필터 조합 전략
```
강세장: 변동성 ↑, 종목 수 ↑
약세장: 변동성 ↓, 종목 수 ↓
횡보장: 거래대금 ↑, 스프레드 ↓
```

### 3. 정기 점검
```
주간: 필터 테스트 실행, 결과 종목 수 확인
월간: 프로파일 조건 재조정
분기: 백테스트로 필터 효과 검증
```

---

## 문제 해결 (FAQ)

### Q1: 필터링 후 종목이 0개예요

**원인**: 조건이 너무 엄격함

**해결**:
1. 거래대금 기준 낮추기 (100억 → 50억)
2. 변동성 범위 넓히기 (3~10% → 3~20%)
3. 스프레드 기준 완화 (0.3% → 0.5%)

### Q2: 너무 많은 종목이 남아요 (100개 이상)

**원인**: 조건이 너무 느슨함

**해결**:
1. 거래대금 기준 높이기 (50억 → 100억)
2. 시가총액 상한 설정 (1조원 이하)
3. 변동성 범위 좁히기 (5~30% → 5~15%)

### Q3: Screening에서 프로파일이 안 보여요

**확인**:
- [ ] 프로파일이 활성화되어 있나요?
- [ ] 선택한 시장(KRW/BTC)과 프로파일 시장이 같나요?
- [ ] 프로파일이 저장되어 있나요?

**해결**: Filtering 페이지 → 프로파일 확장 → "활성화" 클릭

### Q4: 필터 테스트가 느려요 (10초 이상)

**원인**: Upbit API 호출이 많음

**해결**:
1. 먼저 간단한 필터 적용 (거래대금, 가격)
2. 종목 수가 줄어든 후 복잡한 필터 적용 (변동성, 스프레드)
3. 불필요한 필터는 비활성화

### Q5: 어떤 프로파일을 사용해야 하나요?

**초보자**: 보수적 프로파일
**경험자**: 균형적 프로파일  
**전문가**: 공격적 프로파일 또는 커스텀

---

## 체크리스트

### 첫 사용 시
- [ ] Filtering 페이지 방문
- [ ] 보수적 프로파일 생성 및 저장
- [ ] 필터 테스트 실행 (결과 확인)
- [ ] Screening 페이지에서 필터 적용
- [ ] 첫 스크리닝 실행

### 정기 점검 (주간)
- [ ] 필터 테스트 실행
- [ ] 결과 종목 수 확인 (15~40개 적정)
- [ ] 너무 많거나 적으면 조건 조정
- [ ] 필터링 통계 확인

### 전략 변경 시
- [ ] 전략에 맞는 필터 조건 검토
- [ ] 새 프로파일 생성 또는 기존 프로파일 수정
- [ ] 백테스트로 효과 검증
- [ ] 실전 적용

---

## 다음 단계

1. **필터링 마스터하기**
   - 다양한 프로파일 생성 및 비교
   - 시장 상황별 최적 조건 찾기

2. **전략과 연동**
   - 필터 + 전략 조합 테스트
   - 백테스트로 수익률 검증

3. **자동화**
   - 정기 스크리닝 설정
   - 알림 기능 활용

4. **고급 기능**
   - 커스텀 필터 개발
   - 복합 필터 전략

---

**더 자세한 내용**: `docs/filtering_market_guide.md` 참조

**문제가 있나요?** 
- 로그 확인: `logs/bts.log`
- 이슈 등록: GitHub Issues
- 문의: 프로젝트 관리자

**행운을 빕니다! 📈🚀**
